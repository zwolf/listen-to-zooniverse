var celesta = [];
var clav = [];
var swells = [];

var projects = [{"projects":[{"id":"2299","display_name":"Pattern Perception","description":"Surveying the Human Perception: Help us to classify similarity and dissimilarity between spatial patterns of hydrological variables. ","slug":"jukoch/pattern-perception","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/2e2cdc02-83ce-4682-8ea7-bf975117004c.jpeg","links":{}},{"id":"2439","display_name":"Snapshot Wisconsin","description":"Welcome to Snapshot Wisconsin. Help us identify animals in trail camera images.","slug":"zooniverse/snapshot-wisconsin","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/c4b528d8-edb7-4ed7-bf24-9787a7d55a6f.jpeg","links":{}},{"id":"988","display_name":"Computer Vision: Serengeti","description":"Help us identify and position animals within hundreds of camera trap images from the Serengeti","slug":"alexbfree/computer-vision-serengeti","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/85510b91-2375-4a4f-a2ef-dfddc7853fae.jpeg","links":{}},{"id":"575","display_name":"Western Shield — Camera Watch","description":"Discover the night life of the jarrah forest of Western Australia","slug":"birgus2/western-shield-camera-watch","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/6f22d5f1-7ac6-4cf0-9539-e512f733bf1f.jpeg","links":{}},{"id":"1457","display_name":"Microscopy Masters","description":"Help build detailed models of biological molecules by marking electron microscopy images!","slug":"jbrugg/microscopy-masters","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/eea70444-25b7-4bef-b1f1-328f50aa1351.jpeg","links":{}},{"id":"1338","display_name":"Poppin' Galaxy","description":"Pick out Dancing Galaxies ! ","slug":"wim0705/poppin-galaxy","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/4de70108-cfeb-4c07-864c-35ec13878642.jpeg","links":{}},{"id":"14","display_name":"Snapshots at Sea","description":"Help scientists identify Marine Mammals","slug":"tedcheese/snapshots-at-sea","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/fe97b9bc-4728-417d-9eb2-3d453f6f3684.jpeg","links":{}},{"id":"724","display_name":"Comet Hunters","description":"Help discover new comets hidden in our Solar System's asteroid belt","slug":"mschwamb/comet-hunters","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/c1c63ac4-8ffa-4dcb-a363-dcde9233b669.jpeg","links":{}},{"id":"153","display_name":"Jungle Rhythms","description":"Find the rhythm of tropical trees","slug":"khufkens/jungle-rhythms","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/c5eda17a-18ea-4677-a8a7-28ff9637ef05.jpeg","links":{}},{"id":"376","display_name":"Shakespeare's World","description":"Transcribe handwritten documents by Shakespeare’s contemporaries and help us understand his life and times.","slug":"zooniverse/shakespeares-world","redirect":"http://www.shakespearesworld.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/14472e63-10fb-4d47-81c9-8d6812036b37.jpeg","links":{}},{"id":"1380","display_name":"Emigrant City","description":"Transcribe 19th and early 20th century real estate records from the Emigrant Savings Bank!","slug":"nypl/emigrant-city","redirect":"http://emigrantcity.nypl.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/6425f8e6-4ce5-4231-a115-827010e1b4ac.png","links":{}},{"id":"932","display_name":"Measuring the ANZACs","description":"Transcribe first-hand accounts of New Zealanders from the Australian and New Zealand Army Corps circa World War I.","slug":"zooniverse/measuring-the-anzacs","redirect":"https://www.measuringtheanzacs.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/140a3105-d83a-4da1-922a-ef71c031f68c.jpeg","links":{}},{"id":"593","display_name":"WildCam Gorongosa","description":"Identify animals in trail camera images from Gorongosa National Park!","slug":"zooniverse/wildcam-gorongosa","redirect":"http://www.wildcamgorongosa.org/","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/9076eeb6-e162-483f-87d2-39cfa0a06390.png","links":{}},{"id":"245","display_name":"AnnoTate","description":"Help transcribe documents from the Tate collection, and reveal the secret lives of artists.","slug":"drrogg/annotate","redirect":"https://anno.tate.org.uk/","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/318e2936-9fdc-4b77-a731-b61404af1da2.png","links":{}},{"id":"275","display_name":"Fossil Finder","description":"Join us in the search and discovery of fossils at Lake Turkana, Kenya.","slug":"adrianevans/fossil-finder","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/317c321b-9405-4881-bdec-9274ea2c86fa.jpeg","links":{}},{"id":"348","display_name":"Season Spotter Image Marking","description":"Help keep an eye on changing seasons by marking images!","slug":"kosmala/season-spotter-image-marking","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/7a0bd7a9-a17c-4cc0-a8f5-4275dd68ff14.png","links":{}},{"id":"347","display_name":"Season Spotter Questions","description":"Help keep an eye on changing seasons by answering questions!","slug":"kosmala/season-spotter-questions","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/6985bc43-1b9a-4361-8bb8-d323d3d524a3.png","links":{}},{"id":"11","display_name":"Whales as Individuals","description":"Help us identify individual Humpback Whales by clueing our computer algorithms in to patterns on their tails","slug":"tedcheese/whales-as-individuals","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/04f69d43-abec-4851-ad56-d59b99a893aa.jpeg","links":{}},{"id":"3","display_name":"Galaxy Zoo: Bar Lengths","description":"Measure the engines of evolution in disk galaxies.","slug":"vrooje/galaxy-zoo-bar-lengths","redirect":null,"avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/3ce70719-0d7c-43ad-9147-2354f1b7ef2b.jpeg","links":{}},{"id":"17","display_name":"Planet Four: Terrains","description":"Help planetary scientists characterize surfaces on Mars by examining images taken with the Context Camera","slug":"mschwamb/planet-four-terrains","redirect":"","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/6c69466d-e612-4720-9c03-7a9c180c41a9.jpeg","links":{}}],"linked":{"avatars":[{"id":"1820688","href":"/projects/2299/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/2e2cdc02-83ce-4682-8ea7-bf975117004c.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2016-02-23T08:11:12.147Z","metadata":null,"updated_at":"2016-02-23T08:11:12.147Z","links":{"linked":{"href":"/projects/2299","id":"2299","type":"projects"}}},{"id":"2232679","href":"/projects/2439/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/c4b528d8-edb7-4ed7-bf24-9787a7d55a6f.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2016-04-06T18:13:00.668Z","metadata":null,"updated_at":"2016-04-06T18:13:00.668Z","links":{"linked":{"href":"/projects/2439","id":"2439","type":"projects"}}},{"id":"1033104","href":"/projects/988/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/85510b91-2375-4a4f-a2ef-dfddc7853fae.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-09-23T13:59:25.082Z","metadata":null,"updated_at":"2015-09-23T13:59:25.082Z","links":{"linked":{"href":"/projects/988","id":"988","type":"projects"}}},{"id":"2289958","href":"/projects/575/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/6f22d5f1-7ac6-4cf0-9539-e512f733bf1f.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2016-04-29T05:33:15.801Z","metadata":null,"updated_at":"2016-04-29T05:33:15.801Z","links":{"linked":{"href":"/projects/575","id":"575","type":"projects"}}},{"id":"1244010","href":"/projects/1457/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/eea70444-25b7-4bef-b1f1-328f50aa1351.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-11-13T00:40:08.432Z","metadata":null,"updated_at":"2015-11-13T00:40:08.432Z","links":{"linked":{"href":"/projects/1457","id":"1457","type":"projects"}}},{"id":"1202556","href":"/projects/1338/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/4de70108-cfeb-4c07-864c-35ec13878642.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-11-05T04:49:11.512Z","metadata":null,"updated_at":"2015-11-05T04:49:11.512Z","links":{"linked":{"href":"/projects/1338","id":"1338","type":"projects"}}},{"id":"463636","href":"/projects/14/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/fe97b9bc-4728-417d-9eb2-3d453f6f3684.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-05-29T15:52:40.218Z","metadata":null,"updated_at":"2015-05-29T15:52:40.218Z","links":{"linked":{"href":"/projects/14","id":"14","type":"projects"}}},{"id":"1122431","href":"/projects/724/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/c1c63ac4-8ffa-4dcb-a363-dcde9233b669.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-10-19T10:34:23.713Z","metadata":null,"updated_at":"2015-10-19T10:34:23.713Z","links":{"linked":{"href":"/projects/724","id":"724","type":"projects"}}},{"id":"517898","href":"/projects/153/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/c5eda17a-18ea-4677-a8a7-28ff9637ef05.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-12T23:06:25.944Z","metadata":null,"updated_at":"2015-07-12T23:06:25.944Z","links":{"linked":{"href":"/projects/153","id":"153","type":"projects"}}},{"id":"1355197","href":"/projects/376/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/14472e63-10fb-4d47-81c9-8d6812036b37.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-12-01T16:49:50.063Z","metadata":null,"updated_at":"2015-12-01T16:49:50.063Z","links":{"linked":{"href":"/projects/376","id":"376","type":"projects"}}},{"id":"1210084","href":"/projects/1380/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/6425f8e6-4ce5-4231-a115-827010e1b4ac.png","content_type":"image/png","media_type":"project_avatar","external_link":false,"created_at":"2015-11-05T19:11:44.637Z","metadata":null,"updated_at":"2015-11-05T19:11:44.637Z","links":{"linked":{"href":"/projects/1380","id":"1380","type":"projects"}}},{"id":"995961","href":"/projects/932/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/140a3105-d83a-4da1-922a-ef71c031f68c.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-09-17T18:56:48.197Z","metadata":null,"updated_at":"2015-09-17T18:56:48.197Z","links":{"linked":{"href":"/projects/932","id":"932","type":"projects"}}},{"id":"763177","href":"/projects/593/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/9076eeb6-e162-483f-87d2-39cfa0a06390.png","content_type":"image/png","media_type":"project_avatar","external_link":false,"created_at":"2015-09-03T13:05:53.940Z","metadata":null,"updated_at":"2015-09-03T13:05:53.940Z","links":{"linked":{"href":"/projects/593","id":"593","type":"projects"}}},{"id":"757136","href":"/projects/245/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/318e2936-9fdc-4b77-a731-b61404af1da2.png","content_type":"image/png","media_type":"project_avatar","external_link":false,"created_at":"2015-08-28T15:19:10.541Z","metadata":null,"updated_at":"2015-08-28T15:19:10.541Z","links":{"linked":{"href":"/projects/245","id":"245","type":"projects"}}},{"id":"517506","href":"/projects/275/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/317c321b-9405-4881-bdec-9274ea2c86fa.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-07T17:44:09.355Z","metadata":null,"updated_at":"2015-07-07T17:44:09.355Z","links":{"linked":{"href":"/projects/275","id":"275","type":"projects"}}},{"id":"618262","href":"/projects/348/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/7a0bd7a9-a17c-4cc0-a8f5-4275dd68ff14.png","content_type":"image/png","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T18:01:40.454Z","metadata":null,"updated_at":"2015-07-22T18:01:40.454Z","links":{"linked":{"href":"/projects/348","id":"348","type":"projects"}}},{"id":"618261","href":"/projects/347/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/6985bc43-1b9a-4361-8bb8-d323d3d524a3.png","content_type":"image/png","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T18:01:24.942Z","metadata":null,"updated_at":"2015-07-22T18:01:24.942Z","links":{"linked":{"href":"/projects/347","id":"347","type":"projects"}}},{"id":"462006","href":"/projects/11/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/04f69d43-abec-4851-ad56-d59b99a893aa.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-05-28T20:10:39.838Z","metadata":null,"updated_at":"2015-05-28T20:10:39.838Z","links":{"linked":{"href":"/projects/11","id":"11","type":"projects"}}},{"id":"465188","href":"/projects/3/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/3ce70719-0d7c-43ad-9147-2354f1b7ef2b.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-06-01T15:00:58.991Z","metadata":null,"updated_at":"2015-06-01T15:00:58.991Z","links":{"linked":{"href":"/projects/3","id":"3","type":"projects"}}},{"id":"499271","href":"/projects/17/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/6c69466d-e612-4720-9c03-7a9c180c41a9.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-06-25T00:54:00.666Z","metadata":null,"updated_at":"2015-06-25T00:54:00.666Z","links":{"linked":{"href":"/projects/17","id":"17","type":"projects"}}}]},"links":{"projects.workflows":{"href":"/workflows?project_id={projects.id}","type":"workflows"},"projects.subject_sets":{"href":"/subject_sets?project_id={projects.id}","type":"subject_sets"},"projects.project_contents":{"href":"/project_contents?project_id={projects.id}","type":"project_contents"},"projects.project_roles":{"href":"/project_roles?project_id={projects.id}","type":"project_roles"},"projects.pages":{"href":"/projects/{projects.id}/pages","type":"project_pages"},"projects.attached_images":{"href":"/projects/{projects.id}/attached_images","type":"media"},"projects.owner":{"href":"/{projects.owner.href}","type":"owners"},"projects.avatar":{"href":"/projects/{projects.id}/avatar","type":"media"},"projects.background":{"href":"/projects/{projects.id}/background","type":"media"},"projects.classifications_export":{"href":"/projects/{projects.id}/classifications_export","type":"media"},"projects.subjects_export":{"href":"/projects/{projects.id}/subjects_export","type":"media"},"projects.aggregations_export":{"href":"/projects/{projects.id}/aggregations_export","type":"media"}},"meta":{"projects":{"page":1,"page_size":20,"count":42,"include":["avatar"],"page_count":3,"previous_page":null,"next_page":2,"first_href":"/projects?include=avatar\u0026sort=-launch_date\u0026launch_approved=true","previous_href":null,"next_href":"/projects?page=2\u0026include=avatar\u0026sort=-launch_date\u0026launch_approved=true","last_href":"/projects?page=3\u0026include=avatar\u0026sort=-launch_date\u0026launch_approved=true"}}},
{"projects":[{"id":"59","display_name":"Orchid Observers","description":"Help measure the effect of climate change. Photograph and classify orchids to assist climate research.","slug":"zooniverse/orchid-observers","redirect":"http://orchidobservers.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/d71f9499-b955-4f05-bf7a-74465db70452.jpeg","links":{}},{"id":"60","display_name":"Chimp \u0026 See","description":"Discover the secret life of chimpanzees. We need your help to study, explore, and learn from thousands of videos.","slug":"zooniverse/chimp-and-see","redirect":"http://chimpandsee.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/ddfe31cf-2d16-48bc-835b-5ae6c727afc3.jpeg","links":{}},{"id":"58","display_name":"Science Gossip","description":"Uncover the history of citizen science. Help us to classify their drawings and map the origins of citizen science.","slug":"zooniverse/science-gossip","redirect":"http://sciencegossip.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/7647ea52-d175-4920-b8e2-1ba595017918.jpeg","links":{}},{"id":"56","display_name":"Higgs Hunters","description":"Uncover the building blocks of the universe. Help search for unknown exotic particles in the LHC data. ","slug":"zooniverse/higgs-hunters","redirect":"http://higgshunters.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/f6a09e22-771a-4d54-a7bf-0558d2d5cdc8.jpeg","links":{}},{"id":"55","display_name":"Penguin Watch","description":"Spy on penguins for science. Tag penguins in remote regions to help us understand their lives and environment.","slug":"zooniverse/penguin-watch","redirect":"http://penguinwatch.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/6e74b1f7-e50d-4d5a-9e0c-2fc568ed1b29.jpeg","links":{}},{"id":"57","display_name":"Chicago Wildlife Watch","description":"Monitor wildlife in urban Chicago. We need your help to tag animals around Chicago's parks and urban areas. ","slug":"zooniverse/chicago-wildlife-watch","redirect":"http://chicagowildlifewatch.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/1a4a1c5b-d69e-43b0-8b73-bffec78d346a.jpeg","links":{}},{"id":"54","display_name":"Floating Forests","description":"Discover Floating Forests. We're studying how kelp forests grow and change. Help find these forests in images from space!","slug":"zooniverse/floating-forests","redirect":"http://floatingforests.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/d4350f1e-58b8-4a88-a7c9-56659df14635.jpeg","links":{}},{"id":"52","display_name":"Condor Watch","description":"California condors need your help. By tracking their location and social behavior, you can help this endangered species.","slug":"zooniverse/condor-watch","redirect":"http://condorwatch.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/816a2876-f134-41c5-bd59-08a76258d017.jpeg","links":{}},{"id":"51","display_name":"Sunspotter","description":"Sorting out sunspots. Help us organize images by complexity to better understand the Sun’s magnetic activity.","slug":"zooniverse/sunspotter","redirect":"http://sunspotter.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/174b892e-1a6a-44d3-9f39-bc1a3420a9ec.jpeg","links":{}},{"id":"50","display_name":"Disk Detective","description":"Find the birthplace of planets. Help comb our galaxy, looking for stars that could harbour planet-forming disks. ","slug":"zooniverse/disk-detective","redirect":"http://diskdetective.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/6c0b365d-fe0d-4628-b36d-1bc6e583fef2.jpeg","links":{}},{"id":"48","display_name":"Operation War Diary","description":"Explore soldiers' diaries from the First World War. Annotate and tag diaries from the First World War. ","slug":"zooniverse/operation-war-diary","redirect":"http://operationwardiary.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/8a874ad1-008c-4b1f-a68f-c66abd7fdc9f.jpeg","links":{}},{"id":"47","display_name":"Radio Galaxy Zoo","description":"Match growing black holes to their jets. We need help to compare infrared and radio data to spot black holes.","slug":"zooniverse/radio-galaxy-zoo","redirect":"http://radio.galaxyzoo.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/8887fa98-c149-461f-99d2-aafceef25a6b.jpeg","links":{}},{"id":"46","display_name":"Plankton Portal","description":"Dive into the planktonic world. No plankton means no ocean life. Identify different plankton to assess the health of our seas.","slug":"zooniverse/plankton-portal","redirect":"http://planktonportal.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/420b2e5e-3181-400e-8e09-3c92849c8863.jpeg","links":{}},{"id":"45","display_name":"Worm Watch Lab","description":"Track genetic mysteries. We can better understand how our genes work by spotting the worms laying eggs. ","slug":"zooniverse/worm-watch-lab","redirect":"http://wormwatchlab.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/bbcb1ca2-80fd-490e-ab0c-1d3fc83dd358.jpeg","links":{}},{"id":"42","display_name":"Notes from Nature","description":"Take Notes from Nature. Transcribe museum records to take notes from nature, contribute to science. ","slug":"zooniverse/notes-from-nature","redirect":"http://notesfromnature.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/a5986a6f-3ca0-4be3-8912-a40dce96202c.jpeg","links":{}},{"id":"41","display_name":"Planet Four","description":"Explore the Red Planet. Planetary scientists need your help to discover what the weather is like on Mars. ","slug":"zooniverse/planet-four","redirect":"http://planetfour.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/ea12f707-41f3-440f-99e0-5e39f8edb414.jpeg","links":{}},{"id":"40","display_name":"Snapshot Serengeti","description":"Go wild in the Serengeti! We need your help to classify all the different animals caught in millions of camera trap images.","slug":"zooniverse/snapshot-serengeti","redirect":"http://snapshotserengeti.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/84ab650e-8c09-4187-910c-171cb40135e8.jpeg","links":{}},{"id":"37","display_name":"Bat Detective","description":"You're hot on the trail of bats! Help scientists characterise bat calls recorded by citizen scientists.","slug":"zooniverse/bat-detective","redirect":"http://batdetective.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/8fc06440-a7b9-4b6a-ba93-8b153e9daa72.jpeg","links":{}},{"id":"36","display_name":"Cyclone Center","description":"Classify over 30 years of tropical cyclone data. Scientists at NOAA's National Climatic Data Center need your help. ","slug":"zooniverse/cyclone-center","redirect":"http://cyclonecenter.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/443eb5a0-1053-431a-b9fb-648c507423cd.jpeg","links":{}},{"id":"26","display_name":"Planet Hunters","description":"Find planets around stars. Lightcurve changes from the Kepler spacecraft can indicate transiting planets. ","slug":"zooniverse/planet-hunters","redirect":"http://planethunters.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/912d988e-19c3-4abf-b632-312453042d8a.jpeg","links":{}}],"linked":{"avatars":[{"id":"618282","href":"/projects/59/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/d71f9499-b955-4f05-bf7a-74465db70452.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:37:02.575Z","metadata":null,"updated_at":"2015-07-22T19:37:02.575Z","links":{"linked":{"href":"/projects/59","id":"59","type":"projects"}}},{"id":"618301","href":"/projects/60/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/ddfe31cf-2d16-48bc-835b-5ae6c727afc3.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:55:50.796Z","metadata":null,"updated_at":"2015-07-22T20:55:50.796Z","links":{"linked":{"href":"/projects/60","id":"60","type":"projects"}}},{"id":"618279","href":"/projects/58/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/7647ea52-d175-4920-b8e2-1ba595017918.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:29:24.648Z","metadata":null,"updated_at":"2015-07-22T19:29:24.648Z","links":{"linked":{"href":"/projects/58","id":"58","type":"projects"}}},{"id":"618277","href":"/projects/56/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/f6a09e22-771a-4d54-a7bf-0558d2d5cdc8.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:20:18.027Z","metadata":null,"updated_at":"2015-07-22T19:20:18.027Z","links":{"linked":{"href":"/projects/56","id":"56","type":"projects"}}},{"id":"618275","href":"/projects/55/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/6e74b1f7-e50d-4d5a-9e0c-2fc568ed1b29.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:19:44.244Z","metadata":null,"updated_at":"2015-07-22T19:19:44.244Z","links":{"linked":{"href":"/projects/55","id":"55","type":"projects"}}},{"id":"618273","href":"/projects/57/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/1a4a1c5b-d69e-43b0-8b73-bffec78d346a.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:16:37.140Z","metadata":null,"updated_at":"2015-07-22T19:16:37.140Z","links":{"linked":{"href":"/projects/57","id":"57","type":"projects"}}},{"id":"618297","href":"/projects/54/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/d4350f1e-58b8-4a88-a7c9-56659df14635.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:42:54.305Z","metadata":null,"updated_at":"2015-07-22T20:42:54.305Z","links":{"linked":{"href":"/projects/54","id":"54","type":"projects"}}},{"id":"618291","href":"/projects/52/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/816a2876-f134-41c5-bd59-08a76258d017.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:22:46.227Z","metadata":null,"updated_at":"2015-07-22T20:22:46.227Z","links":{"linked":{"href":"/projects/52","id":"52","type":"projects"}}},{"id":"618293","href":"/projects/51/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/174b892e-1a6a-44d3-9f39-bc1a3420a9ec.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:28:18.401Z","metadata":null,"updated_at":"2015-07-22T20:28:18.401Z","links":{"linked":{"href":"/projects/51","id":"51","type":"projects"}}},{"id":"618284","href":"/projects/50/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/6c0b365d-fe0d-4628-b36d-1bc6e583fef2.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:50:10.714Z","metadata":null,"updated_at":"2015-07-22T19:50:10.714Z","links":{"linked":{"href":"/projects/50","id":"50","type":"projects"}}},{"id":"618281","href":"/projects/48/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/8a874ad1-008c-4b1f-a68f-c66abd7fdc9f.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:35:01.807Z","metadata":null,"updated_at":"2015-07-22T19:35:01.807Z","links":{"linked":{"href":"/projects/48","id":"48","type":"projects"}}},{"id":"618295","href":"/projects/47/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/8887fa98-c149-461f-99d2-aafceef25a6b.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:35:33.426Z","metadata":null,"updated_at":"2015-07-22T20:35:33.426Z","links":{"linked":{"href":"/projects/47","id":"47","type":"projects"}}},{"id":"618292","href":"/projects/46/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/420b2e5e-3181-400e-8e09-3c92849c8863.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:23:15.348Z","metadata":null,"updated_at":"2015-07-22T20:23:15.348Z","links":{"linked":{"href":"/projects/46","id":"46","type":"projects"}}},{"id":"618286","href":"/projects/45/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/bbcb1ca2-80fd-490e-ab0c-1d3fc83dd358.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:55:54.059Z","metadata":null,"updated_at":"2015-07-22T19:55:54.059Z","links":{"linked":{"href":"/projects/45","id":"45","type":"projects"}}},{"id":"618276","href":"/projects/42/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/a5986a6f-3ca0-4be3-8912-a40dce96202c.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:20:01.411Z","metadata":null,"updated_at":"2015-07-22T19:20:01.411Z","links":{"linked":{"href":"/projects/42","id":"42","type":"projects"}}},{"id":"618527","href":"/projects/41/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/ea12f707-41f3-440f-99e0-5e39f8edb414.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-24T20:30:31.435Z","metadata":null,"updated_at":"2015-07-24T20:30:31.435Z","links":{"linked":{"href":"/projects/41","id":"41","type":"projects"}}},{"id":"618288","href":"/projects/40/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/84ab650e-8c09-4187-910c-171cb40135e8.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:09:27.268Z","metadata":null,"updated_at":"2015-07-22T20:09:27.268Z","links":{"linked":{"href":"/projects/40","id":"40","type":"projects"}}},{"id":"618294","href":"/projects/37/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/8fc06440-a7b9-4b6a-ba93-8b153e9daa72.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:31:41.300Z","metadata":null,"updated_at":"2015-07-22T20:31:41.300Z","links":{"linked":{"href":"/projects/37","id":"37","type":"projects"}}},{"id":"618283","href":"/projects/36/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/443eb5a0-1053-431a-b9fb-648c507423cd.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T19:48:10.306Z","metadata":null,"updated_at":"2015-07-22T19:48:10.306Z","links":{"linked":{"href":"/projects/36","id":"36","type":"projects"}}},{"id":"618289","href":"/projects/26/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/912d988e-19c3-4abf-b632-312453042d8a.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:12:56.390Z","metadata":null,"updated_at":"2015-07-22T20:12:56.390Z","links":{"linked":{"href":"/projects/26","id":"26","type":"projects"}}}]},"links":{"projects.workflows":{"href":"/workflows?project_id={projects.id}","type":"workflows"},"projects.subject_sets":{"href":"/subject_sets?project_id={projects.id}","type":"subject_sets"},"projects.project_contents":{"href":"/project_contents?project_id={projects.id}","type":"project_contents"},"projects.project_roles":{"href":"/project_roles?project_id={projects.id}","type":"project_roles"},"projects.pages":{"href":"/projects/{projects.id}/pages","type":"project_pages"},"projects.attached_images":{"href":"/projects/{projects.id}/attached_images","type":"media"},"projects.owner":{"href":"/{projects.owner.href}","type":"owners"},"projects.avatar":{"href":"/projects/{projects.id}/avatar","type":"media"},"projects.background":{"href":"/projects/{projects.id}/background","type":"media"},"projects.classifications_export":{"href":"/projects/{projects.id}/classifications_export","type":"media"},"projects.subjects_export":{"href":"/projects/{projects.id}/subjects_export","type":"media"},"projects.aggregations_export":{"href":"/projects/{projects.id}/aggregations_export","type":"media"}},"meta":{"projects":{"page":2,"page_size":20,"count":42,"include":["avatar"],"page_count":3,"previous_page":1,"next_page":3,"first_href":"/projects?include=avatar\u0026sort=-launch_date\u0026launch_approved=true","previous_href":"/projects?include=avatar\u0026sort=-launch_date\u0026launch_approved=true","next_href":"/projects?page=3\u0026include=avatar\u0026sort=-launch_date\u0026launch_approved=true","last_href":"/projects?page=3\u0026include=avatar\u0026sort=-launch_date\u0026launch_approved=true"}}},
{"projects":[{"id":"28","display_name":"Old Weather","description":"Model Earth's climate using historic ship logs. Help recover observations made by US Navy and Coast Guard ships. ","slug":"zooniverse/old-weather","redirect":"http://oldweather.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/7d9c14cc-d151-4691-8675-6ab9ab6c3507.jpeg","links":{}},{"id":"21","display_name":"Galaxy Zoo","description":"Help us discover the secrets of galaxy evolution by classifying distant galaxies.","slug":"zooniverse/galaxy-zoo","redirect":"http://galaxyzoo.org","avatar_src":"panoptes-uploads.zooniverse.org/production/project_avatar/8e945c4f-4d91-46b8-875e-cdfe28a0c66e.jpeg","links":{}}],"linked":{"avatars":[{"id":"618287","href":"/projects/28/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/7d9c14cc-d151-4691-8675-6ab9ab6c3507.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:02:33.867Z","metadata":null,"updated_at":"2015-07-22T20:02:33.867Z","links":{"linked":{"href":"/projects/28","id":"28","type":"projects"}}},{"id":"618298","href":"/projects/21/avatar","src":"https://panoptes-uploads.zooniverse.org/production/project_avatar/8e945c4f-4d91-46b8-875e-cdfe28a0c66e.jpeg","content_type":"image/jpeg","media_type":"project_avatar","external_link":false,"created_at":"2015-07-22T20:47:38.852Z","metadata":null,"updated_at":"2015-07-22T20:47:38.852Z","links":{"linked":{"href":"/projects/21","id":"21","type":"projects"}}}]},"links":{"projects.workflows":{"href":"/workflows?project_id={projects.id}","type":"workflows"},"projects.subject_sets":{"href":"/subject_sets?project_id={projects.id}","type":"subject_sets"},"projects.project_contents":{"href":"/project_contents?project_id={projects.id}","type":"project_contents"},"projects.project_roles":{"href":"/project_roles?project_id={projects.id}","type":"project_roles"},"projects.pages":{"href":"/projects/{projects.id}/pages","type":"project_pages"},"projects.attached_images":{"href":"/projects/{projects.id}/attached_images","type":"media"},"projects.owner":{"href":"/{projects.owner.href}","type":"owners"},"projects.avatar":{"href":"/projects/{projects.id}/avatar","type":"media"},"projects.background":{"href":"/projects/{projects.id}/background","type":"media"},"projects.classifications_export":{"href":"/projects/{projects.id}/classifications_export","type":"media"},"projects.subjects_export":{"href":"/projects/{projects.id}/subjects_export","type":"media"},"projects.aggregations_export":{"href":"/projects/{projects.id}/aggregations_export","type":"media"}},"meta":{"projects":{"page":3,"page_size":20,"count":42,"include":["avatar"],"page_count":3,"previous_page":2,"next_page":null,"first_href":"/projects?include=avatar\u0026sort=-launch_date\u0026launch_approved=true","previous_href":"/projects?page=2\u0026include=avatar\u0026sort=-launch_date\u0026launch_approved=true","next_href":null,"last_href":"/projects?page=3\u0026include=avatar\u0026sort=-launch_date\u0026launch_approved=true"}}}]

var body_background_color = '#f8f8f8',
  body_text_color = '#000',
  svg_background_color = '#1c2733',
  svg_text_color = '#fff',
  newuser_box_color = 'rgb(41, 128, 185)',
  bot_color = 'rgb(155, 89, 182)',
  anon_color = 'rgb(46, 204, 113)',
  edit_color = '#fff';

var loaded_sounds = 0;
var sound_totals = 51;
var sound_load = function(r) {
  loaded_sounds += 1
  if (loaded_sounds == sound_totals) {
    all_loaded = true
    console.log('Loading complete')
    console.log(celesta);
  } else {
    // console.log('Loading : ' + loaded_sounds + ' files out of ' + sound_totals)
  }
}

// load celesta and clav sounds
for (var i = 1; i <= 24; i++) {
  if (i > 9) {
    fn = 'c0' + i;
  } else {
    fn = 'c00' + i;
  }
  celesta.push(new Howl({
    urls: ['sounds/celesta/' + fn + '.ogg',
      'sounds/celesta/' + fn + '.mp3'
    ],
    volume: 0.5,
    onload: sound_load(),
  }))
  clav.push(new Howl({
    urls: ['sounds/clav/' + fn + '.ogg',
      'sounds/clav/' + fn + '.mp3'
    ],
    volume: 0.5,
    onload: sound_load(),
  }))
}

// load swell sounds
for (var i = 1; i <= 3; i++) {
  swells.push(new Howl({
    urls: ['sounds/swells/swell' + i + '.ogg',
      'sounds/swells/swell' + i + '.mp3'
    ],
    volume: 1,
    onload: sound_load(),
  }))
}

var svg = d3.select("#canvas").append("svg")
  .attr({
    width: window.innerWidth,
    height: window.innerHeight
  })
  .style('background-color', '#1c2733');

window.onresize = function(e) {
  svg.attr({
    width: window.innerWidth,
    height: window.innerHeight
  });
}

var panoptes_projects = {};
projects.forEach(function (list) {
  list.projects.forEach(function (project) {
    panoptes_projects[project.id] = project;
  });
});

var pusher = new Pusher('79e8e05ea522377ba6db');
var panoptes = pusher.subscribe('panoptes');
var ouroboros = pusher.subscribe('ouroboros');
var talk = pusher.subscribe('talk');

panoptes.bind('classification', function(data) {
  var user_id = ( !!data.user_id ) ? parseInt( data.user_id ) : 0;
  var project = parseInt(data.project_id) + parseInt(data.workflow_id) + user_id + parseInt(data.classification_id);
  var index = project % (clav.length - 1);
  clav[index].play();
  draw_circle(index + 10, '#f57', panoptes_projects[data.project_id].display_name);
  // console.log( "panoptes classification", data );
});
talk.bind('comment', function(data) {
  var index = Math.round(Math.random() * (swells.length - 1));
  swells[index].play();
  draw_circle(10 + index * 10, '#777', panoptes_projects[data.project_id].display_name);
  console.log("panoptes comment", data);
});

ouroboros.bind('classification', function(data) {
  var index = (data.project + data.subjects + data.user_name).length;
  index = index % (celesta.length - 1);

  celesta[index].play();
  draw_circle(index + 10, '#75f', data.project);
  // console.log( "ouroboros classification", data );
});
ouroboros.bind('comment', function(data) {
  var index = Math.round(Math.random() * (swells.length - 1));
  swells[index].play();
  draw_circle(10 + index * 10, '#777', data.body);
  console.log("ouroboros comment", data);
});

draw_circle = function(size, edit_color, label) {
  var x = Math.random() * (window.innerWidth - size) + size;
  var y = Math.random() * (window.innerHeight - size) + size;

  var circle_group = svg.append('g')
    .attr('transform', 'translate(' + x + ', ' + y + ')')
    .attr('fill', edit_color)
    .style('opacity', 0.5)

  var ring = circle_group.append('circle')
    .attr({
      r: size + 20,
      stroke: 'none'
    })
    .transition()
    .attr('r', size + 40)
    .style('opacity', 0)
    .ease(Math.sqrt)
    .duration(2500)
    .remove();

  var circle = circle_group.append('circle')
    .attr('r', size)
    .transition()
    .duration(60000)
    .style('opacity', 0)
    .each('end', function() {
      circle_group.remove();
    })
    .remove();
  
    if (label) {
      var label = circle_group.append('text')
        .text(label)
        .classed('comment-body', true)
        .attr('text-anchor', 'middle')
        .attr('fill', '#fd6')
        .transition()
        .delay(1000)
        .style('opacity', 0)
        .duration(30000)
        .remove();
    }
}
